{% extends "base.html" %}


{% block title %} Listar Preguntas{% endblock %}

{% block extra_css %}
<style>
  .color_update{
    color: #FFBE33;
    font-size: 22px;
  }
  .color_delete{
    color: #F3111F;
    font-size: 22px;
  }
</style>
{% endblock %}


{% block content %}

{% block content_head %}

<!-- Bloque Titulo-->
      <div class="row mt-2">
        <div class="col-md-8 col-lg-10">
          <h1>Listar Preguntas</h1>
        </div>
        <div class="col-md-4 col-lg-2">
          {% if perms.polls.add_question %}
          <a href="{% url 'polls:create' %}" class="btn btn-success btn-block mt-2" >Crear Pregunta </a>
          {% endif %}

          {% if perms.polls.is_reporter %}
          <a href="#" class="btn btn-info btn-block mt-2" ><i><i class="fas fa-chart-pie"></i></i> Ver reporte </a>
          {% endif %}

        </div>
      </div>
      <!-- End Bloque Titulo-->

{% endblock %}

{% block breadcrumb %}
    
  <li class="breadcrumb-item active" aria-current="page">Polls</li>

{% endblock %}

      
      
{% block content_body %}



      <!-- Bloque tabla-->

      <div class="row">
        <div class="col">
          {% if questions %}

          {% if messages %}
            {% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
              {{message}}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidder="true">&times;</span>
              </button>
            </div>

            {% endfor %}
         {% endif %}


          <table class="table table-striped" table-hover mt-5>
            <thead><!--Solo la cabecera-->
              <tr>
                <th>#ID</th>
                <th>Pregunta</th>
                <th>Fecha</th>
                <th>Accion</th>
              </tr>
            </head><!--hasta aqui cabecera-->
            <tbody><!--Solo el cuerpo de la tabla-->
            {% for question in questions %}

              <tr>
                <td>{{question.id}}</td>
                <td>{{question.question_text}}</td>
                <td>{{question.pub_date}}</td>
                <td>
                  {% if perms.polls.delete_question %}
                  <a href="{% url 'polls:delete' question.id %}"><i class="fas fa-trash-alt color_delete"></i></a>
                  {% endif %}
                  {% if perms.polls.change_question %}
                  <a href="{% url 'polls:update' question.id %}"><i class="fas fa-edit color_update"></i></a>
                  {% endif %}
                </td>
              </tr>
              
            {% endfor %}
            </tbody><!--Hasta aqui cuerpo tabla-->
                

          </table>
          
          <!-- Paginacion con bootstrap-->
          {% if questions.has_other_pages %}
          <nav aria-label="Page navigation">
            <ul class="pagination">
              {% if questions.has_previous %}
                <li class="page-item"><a href="?q={{query}} page={{ questions.previous_page_number }}" class="page-link">&laquo;</a></li>
              {% else %}
                <li class="page-item" class="disabled"><span class="page-link">&laquo;</span></li>
              {% endif %}
              
              {% for i in questions.paginator.page_range %}
                {% if questions.number == i %}
                  <li class="page-item active"><span class="page-link">{{ i }} <span class="sr-only">(current)</span></span></li>
                {% else %}
                  <li class="page-item"><a href="?page={{ i }}" class="page-link">{{ i }}</a></li>
                {% endif %}
              {% endfor %}

              {% if questions.has_next %}
                <li><a href="?page={{ questions.next_page_number }}" class="page-link">&raquo;</a></li>
              {% else %}
                <li class="disabled"><span class="page-link">&raquo;</span></li>
              {% endif %}
            </ul>
            </nav>
          {% endif %}

          {% else %}
          <p class="text-center">No hay resultados de encuesta</p>
          <!--Hasta aqui paginacion-->
          {% endif %}
          


        </div>
      </div>
      <!--Fin bloque tabla-->

{% endblock %}
{% endblock %}
